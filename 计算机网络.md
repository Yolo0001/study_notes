## 计算机网络的概念
### 什么是计算机网络？
计算机网络是一个将众多==*分散的*==、==自治的==计算机系统，通过==通信设备==与==线路==连接起来，由功能完善的软件实现==资源共享==和==信息传递==的系统。
### 计算机网络、互连网、互联网的区别？

- 计算机网络：
	1. 由若干==结点==[^1]和连接这些结点的==链路==[^2]组成
	2. 数据通信（信息传递）和资源共享
- 互连网：
	1. 多个计算机网络通过==路由器==互相连接而成
	2. 可以使用任意通信协议
- 互联网：
	1. 特指全世界最大的计算机网络（因特网），由各大ISP和国际机构组成
	2. TCP/IP协议族作为通信规则
- 其他拓展：
	- 集线器（hub）：
		1. 可以把多个结点连接起来，组成一个计算机网络
		2. 工作在物理层
	- 交换机（switch）：
		1. 可以把多个结点连接起来，组成一个计算机网络
		2. 数据链路层
	- 路由器（router）：
		1. 可以把两个或多个计算机网络互相连接起来，形成规模更大的计算机网络，也可以称为“互连网”。
		2. 网络层
	- 路由器连接不同的网络，集线器和交换机连接不同的结点
	- ISP（Internet Service Provider）：
	- 家用路由器=路由器+交换机+其他功能



[^1]: 计算机、集线器、路由器、交换机

[^2]: 有线链路和无线链路

---
### 计算机网络的功能
- 数据通信
- 资源共享
- 分布式处理
- 提高可靠性
- 负载均衡
- 其他
### 计算机网络的组成
- 从组成部分看
	- 硬件
		- 主机，即端系统（end system）——如：电脑、手机、物联网设备
		- 通信设备——如：集线器、交换机、路由器
		- 通信链路——如：网线、光纤、同轴电缆
	- 软件
	- 协议
		- 规定计算机网络中的通信规则
		- 由硬件、软件共同实现，如：网络适配器+软件 实现网络通信协议
- 从工作方式看
	- 边缘部分
		- 直接为用户提供服务
		- 主要由连接到互联网上的主机及其软件组成
	- 核心部分
		- 为边缘部分提供服务
		- 有大量网络和连接这些网络的路由器组成
- 从逻辑功能看
	- 通信子网
		- 计算机网络负责通信传输
	- 资源子网
		- 主机的应用程序

### 电路交换、报文交换、分组交换
#### 电路交换
- 优点
	1. 通信前建立一个专用通道
	2. 使用占用这个通道
	3. 数据直送、传输率高
	4. 适用于：低频次、大量传输数据
- 缺点
	1. 建立、释放连接，需要额外时间
	2. 线路被通信双方占用，利用率低
	3. 线路分配的灵活性差
	4. 不支持差错控制
#### 报文交换
- 优点
	1. 勿需提前建立连接
	2. 数据以“报文”为单位被交换节点间“存储转发”，通信线路可以灵活分配
	3. 无需独占，线路利用率高
	4. 支持“差错控制”
- 缺点
	1. 报文不定长，不方便存储转发管理
	2. 长报文存储转发时间开销大、缓存开销大
	3. 长报文容易出错，重传代价大
#### 分组交换
- 优点
	1. 无需建立连接
	2. 以“分组”为单位被交换节点“存储转发”，通信线路可以灵活分配
	3. 无需独占，线路利用率高
	4. 支持“差错控制”
	- 相比报文交换，优化：
		1. 分组定长，好管理
		2. 分组存储转发时间开销小，缓存开销小
		3. 分组不易出错，重传代价低
- 缺点
	1. 相比于报文交换，控制信息占比增加
	2. 相比于电路交换，依然存在存储转发时延
	3. 报文被拆分为多个分组，传输过程中可能出现失序、丢失等问题，增加处理的复杂度。
### 计算机网络分类
#### 分布范围
- 广域网（WAN）
- 城域网（MAN）、局域网（LAN）——使用“以太网技术”实现
- 个域网（PAN）
#### 传输技术
- 广播式网络（根据数据目的地址判断是否接受）、点对点网络
#### 拓扑结构
- 总线形——存在“总线争用”问题；广播式传输
- 环形——用“令牌”解决总线争用问题；广播式传输
- 星形——不存在总线争用问题；由中央设备实现数据的点对点传输
- 网状——灵活、可靠性高、控制复杂、线路成本高
#### 使用者
- 公用网
- 专用网
#### 分布范围传输介质
- 有线网络
- 无线网络

### 计算机网络的性能指标
- 速率——数据率、比特率、数据传输速率
- 带宽——表示某信道允许通过的最高数据率
- 吞吐量——描述某个网络（或节点、信道）的在单位时间内通过的实际数据量（实际的综合数据率）
- 带宽——表示某信道允许通过的信号频带范围、单位Hz
- 单位
	- bit/s=b/s=bps
	- bps、kbps、Mbps、Gbps、Tbps（10^3）
	- 1B=8b
- 时延：指数据一端传送到另一端所需的时间
	- 总时延=发送时延+传播时延+处理时延+排队时延
	- 发送时延=数据长度（bit）/发送速率（bit/s)
	- 传播时延=信道长度（m）/电磁波在信道中的传播速度（m/s)
	- 处理时延和排队时延一般不考虑
- 时延带宽积= 单向传播时延\*带宽
- 往返时延RTT——表示从发送方发送完数据，到发送方收到来自接受方的确认总共经历的时间
- 信道利用率
	- 某个信道有百分之几的时间是有数据通过的
	- 利用率低浪费带宽资源；利用率太高可能导致网络拥塞
### 计算机网络的分层结构
- 网络的体系结构
	- “体系结构”精确定义了网络的层次划分、各层功能、各层协议等，不涉及具体实现
	- 三种常见的网络体系结构
		- OSI参考模型
		- TCP/IP模型
		- 五层模型
- 实体、协议、接口、服务
	- 实体：第n层中的活动元素（软件+硬件）称为第n层实体
	- 协议：控制对等实体之间进行通信的规则的集合，是水平的
	- 服务：是指下层为紧邻的上层提供的功能调用，是垂直的
	- 接口：又称为服务访问点（SAP），上一层实体通过“接口”请求下一层实体的服务。
- PDU、SDU、PCI
	- PDU协议数据单元、SDU服务数据单元、PCI协议控制信息
	- n-SDU+n-PCI = n-PDU = (n-1)-SDU
- 协议的三要素
	- 语法——数据与控制信息的格式
	- 语义——即需要发出何种控制信息、完成何种动作及做出何种应答
	- 同步（或时序）——执行各种操作的条件、时序关系等
### OSI参考模型

|       | 任务                | 功能                                            |                 |       |                           |
| ----- | ----------------- | --------------------------------------------- | --------------- | ----- | ------------------------- |
| 应用层   | 实现特定网络应用          |                                               | 报文（message）     | 应用层   |                           |
| 表示层   | 解决不同主机上信息表示不一致的问题 | 数据格式转换                                        |                 |       |                           |
| 会话层   | 管理进程间会话           | 会话管理                                          |                 |       |                           |
| 传输层   | 实现端到端（进程到进程）通信    | 复用和分用、差错控制、流量控制、连接管理、可靠传输管理                   | 报文段（segment）    | 传输层   |                           |
| 网络层   | 把分组从源结点转发到目的结点    | 路由选择、分组转发、拥塞控制、网际互联、~~差错控制、流量控制、连接管理、可靠传输管理~~ | 数据报（分组）（packet） | 网络层   |                           |
| 数据链路层 | 确保相邻节点之间的链路逻辑上无差错 | 差错控制、流量控制                                     | 帧（frame）        | 网络接口层 | 实现相邻节点之间的数据传输（为网络层传输“分组”） |
| 物理层   | 实现相邻节点之间比特的传输     | 需定义电路接口参数、信号的含义、电气特性等                         | 比特（bit)         |       |                           |

- OSI传输层仅可向上提供：有连接的可靠的服务
- OSI网络层可向上提供：
	- 有连接可靠的服务（虚电路）
	- 无连接不可靠的服务（数据报）
- TCP/IP传输层可向上提供：
	- 有连接可靠的服务（TCP协议）
	- 无连接不可靠服务（UDP协议）
- TCP/IP网络层仅可向上提供：无连接不可靠服务

## 物理层
### 通信基础基本概念
- 信源；信宿
- 信号，数据的载体：
	- 数字信号：值是离散的
	- 模拟信号：值是连续的
- 信道，即信号的通道
- 码元
	- 一个“信号周期”内可能出现几种信号？
		- 每一类信号就是一个码元
		- “码元宽度”指一个“信号周期”的长度
	- 若一个周期可能出现K种信号，就是K进制码元
		- 1码元 携带 log$_2$k bit
- 速率
	- 波特率——每秒传输几个码元。单位：码元、秒，或波特（Baud）
	- 比特率——每秒传输几个比特。单位：bit/s、b/s，bps
### 信道的极限容量
- 带宽——信道允许通过的信号频带范围。单位：Hz
- 噪声——噪声会影响信道的数据传输效果
- 奈奎斯特定理
	- 无噪声情况下的极限波特率=2W（单位：波特，即码元/秒）
	- 无噪声情况下信道的极限比特率=2Wlog$_2$k(b/s)
- 香农定理
	- 信噪比S/N
		- 分贝记法——10log$_{10}$S/N (dB)
		- 无单位记法——S/N = 信号功率/噪声功率
	- 有噪声情况下信道的极限比特率 = Wlog$_2$(1+S/N)) (b/s)
### 编码和调制
- 概念
	- 编码——二进制->数字信号，逆过程“解码”
	- 调制——二进制->模拟信号，逆过程“解调”
- 编码技术
	- 不归零编码（NRZ）——低0高1，中不变
	- 归零编码（RZ）——低0高1，中归零
	- 反向非归零编码（NRZI）——跳0不跳1看起点，中不变
	- 曼彻斯特编码——跳0反跳1看中间，中必变
		- 上0下1（考研常见）
		- 上1下0
	- 差分曼彻斯特编码——跳0不跳1看起点，中必变
- 调制技术
	- 调幅（AM）或幅移键控（ASK）——若信号波有k种振幅，则1码元=log$_2$k bit
	- 调频（FM）或频移键控（FSK）——若信号波有K种频率，则1码元=log$_2$k bit
	- 调相或相移键控（PSK）——若信号波有K种相位，则1码元=log$_2$k bit
	- 正交幅度调制（QAM）
		- AM与PM结合，形成叠加信号，若有m种振幅、n种相位，则1码元=log$_2$mn bit
		- QAM-16的含义采用QAM调制技术，有16种码元
![[./img/各种编码.png]]

|       | 不归零（NRZ） | 归零（RZ） | 反向非归零（NRZI）  | 曼彻斯特 | 差分曼彻斯特 |
| ----- | -------- | ------ | ------------ | ---- | ------ |
| 自同步能力 | 无        | 有      | 若增加冗余位可实现自同步 | 有    | 有      |
| 浪费带宽  | 无        | 浪费     | 不太浪费         | 浪费   | 浪费     |
| 抗干扰能力 | 弱        | 弱      | 弱            | 强    | 强      |

### 传输介质
- 双绞线——两根导线相互绞合而成
	- 有屏蔽层=屏蔽双绞线（STP）
	- 没有屏蔽层=（非屏蔽双绞线）（UTP）
- 同轴电缆——内导体（用于传输信号）+外导体屏蔽层（用于抗电磁干扰)
- 光纤
	- 纤芯（高折射率）+包层（低折射率）。利用光的全反射特性，在纤芯传输光脉冲信号
	- 分类
		- 单模光纤——一条光线，长距离
		- 多模光纤——多条光线，近距离
- 无线传输介质
	- 本质都是电磁波，波长不同（长波->短波）。波长和频率成反比
	- 短波信号指向性强，数据传输能力强；长波指向性弱，绕射性好
	- 卫星短波（微波）通信
- 物理层接口特性
	- 机械特性——指明接口所用接线器的形状和尺寸、引脚数目和排列、固定和锁定装置等
	- 电气特性——指明接口电缆各条线的电压范围、传输速率、距离限制
	- 功能特性——指明某条线上出现某一电平的意义
	- 过程特性（规程特性）——指明对于不同功能的各种可能事件的出现顺序
### 物理层设备
- 中继器
	- 中继器只有两个端口。通过一个端口接收信号，将失真信号整形再生，并转发另一个端口（会有时延）
	- 仅支持半双工
	- 两个端口对应两个网段
- 集线器（Hub）
	- 多端口中继器
	- 各端口连接的结点不可同时发送数据，会导致“冲突”
	- n个端口对应N个“网段”，各网段属于同一个“冲突域”
- 一些特性
	- 集线器、中继器不能“无限串联”
		- 10Base5 （5——4——3）：串联5个网段，使用4个集线器，3个网段挂载计算机
	- 集线器：连接的网络，物理上星形拓扑，逻辑上总线型拓扑
	- 集线器：连接的各网段“共享带宽”
	- 集线器：可以连接不同的介质，因此两个网段的物理层接口特性可以不同（意味着集线器连接的网段，“物理层协议”可以不同“）
	- 集线器：如果连接两个不同的网段，会导致所有网段”速率向下兼容“